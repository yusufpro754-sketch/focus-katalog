<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ã–zel ÃœrÃ¼n Paneli</title>
    <style>
        /* ========================================
           TEMEL TASARIM VE STÄ°L AYARLARI (CSS)
           ========================================
        */
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: #222; /* Koyu arka plan */
            color: #fff; 
            padding: 20px; 
            margin: 0;
        }
        
        /* --- GÄ°RÄ°Åž EKRANI TASARIMI --- */
        #login-screen {
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            height: 80vh; /* EkranÄ±n %80'ini kapla */
        }
        
        input[type="password"] { 
            padding: 12px; 
            font-size: 1.1rem; 
            border-radius: 6px; 
            border: none; 
            outline: none; 
            text-align: center;
            width: 200px;
            margin-bottom: 15px;
        }
        
        button { 
            padding: 10px 25px; 
            font-size: 1rem; 
            cursor: pointer; 
            background: #e74c3c; /* KÄ±rmÄ±zÄ± buton */
            color: white; 
            border: none; 
            border-radius: 6px; 
            transition: 0.3s;
            font-weight: bold;
        }
        
        button:hover { 
            background: #c0392b; /* Ãœzerine gelince koyulaÅŸ */
        }

        /* --- ANA Ä°Ã‡ERÄ°K (BaÅŸlangÄ±Ã§ta Gizli) --- */
        #main-content { 
            display: none; 
        }

        h1 { 
            text-align: center; 
            color: #f1c40f; /* SarÄ± baÅŸlÄ±k */
            margin-bottom: 30px; 
            border-bottom: 1px solid #444;
            padding-bottom: 15px;
        }

        /* --- ÃœRÃœN KARTLARI IZGARA YAPISI --- */
        .container {
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); /* Responsive */
            gap: 20px; 
            max-width: 1200px; 
            margin: 0 auto;
        }

        /* --- KART TASARIMI --- */
        .card {
            background: #333; 
            border-radius: 10px; 
            overflow: hidden; 
            display: flex; 
            border: 1px solid #444;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transition: transform 0.2s;
        }

        .card:hover {
            transform: translateY(-3px); /* Hover efekti */
            border-color: #f1c40f;
        }

        .card img { 
            width: 110px; 
            height: 100%; 
            object-fit: cover; 
            background: #555; 
        }

        .card-body { 
            padding: 15px; 
            flex-grow: 1; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
        }

        .card-title { 
            font-size: 1.2rem; 
            font-weight: bold; 
            margin-bottom: 8px; 
            color: #fff; 
        }

        .card-stock { 
            color: #bbb; 
            font-size: 0.95rem; 
            margin-bottom: 8px; 
        }

        .card-price { 
            color: #2ecc71; /* YeÅŸil fiyat */
            font-size: 1.4rem; 
            font-weight: bold; 
        }

        /* Hata ve YÃ¼kleme MesajlarÄ± */
        .msg-box {
            text-align: center;
            font-size: 1.2rem;
            color: #ccc;
            margin-top: 50px;
        }
    </style>
</head>
<body>

    <div id="login-screen">
        <h2 style="color:#ecf0f1; margin-bottom:15px;">Panele GiriÅŸ</h2>
        <input type="password" id="passwordInput" placeholder="Åžifrenizi Girin">
        <button onclick="checkPassword()">GiriÅŸ Yap</button>
        <p id="error-msg" style="color:#e74c3c; display:none; margin-top:15px; font-weight:bold;">HatalÄ± Åžifre!</p>
    </div>

    <div id="main-content">
        <h1>ÃœrÃ¼n Stok & Fiyat Paneli</h1>
        <div class="container" id="urunVitrin">
            </div>
    </div>

    <script>
        // --- AYARLAR ---
        
        // Panele giriÅŸ ÅŸifresi (BurayÄ± deÄŸiÅŸtirebilirsin)
        const SECRET_PASS = "1234"; 
        
        // Senin verdiÄŸin GOOGLE SHEET CSV Linki (Otomatik eklendi)
        const SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT5h4pxPpj9zeIvAu7JotsLKTTqwfEkgvJNbVVQc5oBu--9g4TSl2RPlpD-D1HFEIkTkyn7u1K8oqIv/pub?output=csv'; 
        
        // ----------------

        // Åžifre Kontrol Fonksiyonu
        function checkPassword() {
            const input = document.getElementById('passwordInput').value;
            
            // EÄŸer ÅŸifre doÄŸruysa
            if(input === SECRET_PASS) {
                // GiriÅŸ ekranÄ±nÄ± gizle, ana ekranÄ± gÃ¶ster
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('main-content').style.display = 'block';
                
                // Verileri Ã§ekmeye baÅŸla
                verileriGetir(); 
            } else {
                // Åžifre yanlÄ±ÅŸsa hata mesajÄ± gÃ¶ster
                document.getElementById('error-msg').style.display = 'block';
            }
        }

        // Google Sheets'ten Veri Ã‡eken Ana Fonksiyon
        async function verileriGetir() {
            const vitrin = document.getElementById('urunVitrin');
            
            // KullanÄ±cÄ±ya yÃ¼kleniyor mesajÄ± ver
            vitrin.innerHTML = '<div class="msg-box">Veriler gÃ¼ncelleniyor, lÃ¼tfen bekleyin...</div>';
            
            try {
                // Linke istek at
                const response = await fetch(SHEET_URL);
                
                // Gelen cevabÄ± metne Ã§evir
                const data = await response.text();
                
                // SatÄ±rlara bÃ¶l (Yeni satÄ±r karakterine gÃ¶re)
                // slice(1) diyerek en Ã¼stteki baÅŸlÄ±k satÄ±rÄ±nÄ± (UrunAdi, Fiyat vb.) atlÄ±yoruz
                const rows = data.split('\n').slice(1); 
                
                // Ã–nce vitrini temizle
                vitrin.innerHTML = ''; 

                // Her bir satÄ±rÄ± dÃ¶ngÃ¼ye al
                rows.forEach(row => {
                    // CSV satÄ±rÄ±nÄ± virgÃ¼llerden parÃ§ala
                    // (Basit parÃ§alama bazen tÄ±rnak iÃ§inde virgÃ¼l varsa hata verebilir, 
                    // bu regex daha gÃ¼venli bir ayÄ±rma yapar)
                    const columns = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                    
                    // EÄŸer satÄ±r boÅŸsa veya eksikse atla
                    if (columns.length < 2) return;

                    // Gelen verideki tÄ±rnak iÅŸaretlerini temizleyen yardÄ±mcÄ± fonksiyon
                    const clean = (text) => text ? text.replace(/^"|"$/g, '').trim() : '';

                    // SÃ¼tunlarÄ± deÄŸiÅŸkenlere ata (Senin tablodaki sÄ±raya gÃ¶re)
                    const urunAdi = clean(columns[0]);   // A SÃ¼tunu
                    const fiyat = clean(columns[1]);     // B SÃ¼tunu
                    const stok = clean(columns[2]);      // C SÃ¼tunu
                    // D SÃ¼tunu (Resim yoksa varsayÄ±lan gri resim kullan)
                    const resim = clean(columns[3]) || 'https://via.placeholder.com/150/555555/ffffff?text=Resim+Yok';

                    // HTML KartÄ±nÄ± oluÅŸtur ve sayfaya ekle
                    vitrin.innerHTML += `
                        <div class="card">
                            <img src="${resim}" alt="${urunAdi}" onerror="this.src='https://via.placeholder.com/150/555555/ffffff?text=Hata'">
                            <div class="card-body">
                                <div class="card-title">${urunAdi}</div>
                                <div class="card-stock">ðŸ“¦ Stok: ${stok} Adet</div>
                                <div class="card-price">${fiyat} TL</div>
                            </div>
                        </div>
                    `;
                });

                // EÄŸer hiÃ§ Ã¼rÃ¼n yoksa mesaj ver
                if(rows.length === 0) {
                    vitrin.innerHTML = '<div class="msg-box">Listede henÃ¼z Ã¼rÃ¼n yok.</div>';
                }

            } catch (error) {
                // Bir hata olursa (Link bozuksa veya internet yoksa)
                console.error(error);
                vitrin.innerHTML = '<div class="msg-box" style="color:#e74c3c;">Hata: Veriler alÄ±namadÄ±.<br>LÃ¼tfen linki kontrol edin veya internet baÄŸlantÄ±nÄ±za bakÄ±n.</div>';
            }
        }
    </script>
</body>
</html>
